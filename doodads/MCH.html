<!DOCTYPE html>
<style>body {margin: 0;}</style>


<main style="display: flex;">

<!--This is where all the pretty pictures will go.-->
<svg viewBox="0 0 10000 1" style=" background-color:black;" id="hexCanvas"></svg>

<!--This is where the text will go.-->
<div id="textHolder" style="min-width: 20rem;">Can I have an embedded svg like so:</div>

</main>

<script>
//✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨
//=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
//Map Info
//The Object below is what you want to modify in order to tweak the map content
//=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
//✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨✨

var hexGrid = {
    hexes: [
        {col:1, row:1, faction:"Neutral", landform:"Wastes ", 
            terrainFeature: "Gray and rust-orange dirt, sickly brown grass. Metal beams protrude.  ", 
            obviousFeature: "Bands of eyeless purple- hued humans build small settlements. Will  trade warily, listen cautiously, speak rarely. ", 
            hiddenFeature: "The crater-tomb of the Water That Eats. Sacrificing a friend or love one to it grants a boon, often tainted. ", 
        },
        {col:1, row:2, faction:"Neutral", landform:"Wastes ", 
            terrainFeature: "Laminated layers of pristine volcanic glass, as if newly cooled. ", 
            obviousFeature: "Burbling volcanic pit, ringed by smooth metal gantries and floating wires. ", 
            hiddenFeature: "Slug-like magma sprites, jealous of their hidden mineral wealth. They swim through stone. ", 
        },
        {col:1, row:3, faction:"Rust Monks", landform:"Bluffs ", 
            terrainFeature: "Hoodoo-lined cliff walls of banded ochre and ebon sandstone. ", 
            obviousFeature: "Cliff-dwellings with windows and eaves designed to 'sing' in the west wind with a meditative drone. ", 
            hiddenFeature: "Collections of mica-leaf volumes etched in alien tongues. Burned translation notes, signs of hasty flight. ", 
        },
        {col:1, row:4, faction:"Pallid Knights", landform:"Barren Fells ", 
            terrainFeature: "Angular shards of granite and basalt. Eerie hard-light shadows. ", 
            obviousFeature: "The Starlight Cathedral. Motes of starlight trapped to form windows, arches, pews. ", 
            hiddenFeature: "Pieces of iridescent weightless mirrors, accidentally created. They only reflect the truth. ", 
        },
        {col:1, row:5, faction:"Researchers", landform:"Barren Fells ", 
            terrainFeature: "Ash covered basalt descents. Sudden updrafts and crosswinds. ", 
            obviousFeature: "Granite aqueduct carries oily water from 1.4 Drinking it brings you closer to both death and undeath. ", 
            hiddenFeature: "Paper golems tend to meditative redoubt. Disillusioned mortal Researcher curates secrets in rock garden.  ", 
        },
        {col:1, row:6, faction:"Neutral", landform:"Bluffs ", 
            terrainFeature: "Sharp arid cliffs, rust red rivers, carved to run at sharp angles. ", 
            obviousFeature: "Iron-forged cliff face of three-headed goddess, free of rust. Her centre mouth has a staircase descending. ", 
            hiddenFeature: "At the deepest point of a pond fed by the river, a vault door. Inside, an armoury of terrible weapons. ", 
        },
        {col:1, row:7, faction:"Kalawi Tribe", landform:"Savannah ", 
            terrainFeature: "Stands of red-leafed trees dot the scrub. Tall obsidian spires. ", 
            obviousFeature: "Tribal stronghold extracts, works, trades obsidian. Ivory armour, ironwood walls. ", 
            hiddenFeature: "Internal factional struggle supplanted rightful heir. Partisans lair in mine, skin cut by shards to mark intent. ", 
        },
        {col:1, row:8, faction:"Neutral", landform:"Bluffs ", 
            terrainFeature: "Sandstone mesas, tinged with orange streaks and small rockfalls. ", 
            obviousFeature: "Protean Army scout trapped under a landslide. Bleeding ichor. Promises wealth if removed. Lies. ", 
            hiddenFeature: "Buried hoard of psychic elephant ivory. Valuable. Makes excellent magic items or focuses. Might be haunted. ", 
        },
        {col:1, row:9, faction:"Protean Army", landform:"Savannah ", 
            terrainFeature: "Unusually tall kauri trees, bladed shrubs, finger-thick grasses. ", 
            obviousFeature: "Concentric castle, under construction. Kalawi tribe labour, paid in alcohol, protean drugs, and iron. ", 
            hiddenFeature: "Wellspring of soul-stuff, granting equally power and madness. Psychic elephants stand guard. ", 
        },
        {col:1, row:10, faction:"Kalawi Tribe", landform:"Savannah ", 
            terrainFeature: "Waist-high grasslands, animal trails, patches of burnt soil. ", 
            obviousFeature: "Signs of recent battle. Discarded broken weapons, crackling purple fire, smouldering craters. ", 
            hiddenFeature: "Kalawi warcamp licking  wounds, buring the dead. Hidden by near- invisibility magic. ", 
        },
        {col:2, row:1, faction:"Rust Monks", landform:"Wastes ", 
            terrainFeature: "Dry creek bed. Pockets of sticky liquid seep up and evaporate. ", 
            obviousFeature: "Suspended mesh parabolic dish, manoeuvred by wires and cranks. Twanging wires, creaking metal.  ", 
            hiddenFeature: "Fuschiagogue sky- prophet in monitoring dome, directs dish  operations, breeds winch-finches. ", 
        },
        {col:2, row:2, faction:"Neutral", landform:"Wastes ", 
            terrainFeature: "Salt-crusted dunes, scattered patches of red moss. ", 
            obviousFeature: "Huge hole in the ground, reflective green smoke billowing out of it. It drifts a long way before dissipating. ", 
            hiddenFeature: "At the bottom lies an ancient wurm corpse, slowly expelling clouds of acidic gas. Its eye is valuable. ", 
        },
    ],
}

</script>








































<!--The rest of this file is just janky code to turn the list into an interactive map. You hopefully don't need to touch any of this stuff.-->
<script>
    //define the parameters for the hex map.
    var numColumns = 8;
    var numRows = 10;
    var hexOuterRadius = 100; 
    var hexInnerRadius = hexOuterRadius * Math.sqrt(3)/2; 
    
    //calculate internal dimensions of map, assuming hexes are oriented with flat side on top.
    var totalWidth = hexOuterRadius * (numColumns + Math.ceil(numColumns/2)); //TODO not quite right. side bit cut off
    var totalheight = hexInnerRadius * (2 * numRows + 1);

    //set up the svg to use as a canvas
    var canvas = document.getElementById("hexCanvas");
    //scale the svg height to the window height. I dunno. I think it looks nice that way. Will probably look turbo janky on mobile. Note the body {margin: 0;} up top that makes this work.
    canvas.setAttribute("height", window.innerHeight);
    //Fiddle with the interior dimensions of the svg to make it the right size for the hex grid.
    canvas.setAttribute("viewBox", "0 0 " + totalWidth + " " + totalheight);

    //------------------------------------
    // Functions for building the map
    //------------------------------------
    
    function addToCanvas(addedContent) {
        //This function just takes a string and appends it to the inside of the canvas svg.
        canvasContent = canvas.innerHTML;
        console.log(addedContent);
        canvas.innerHTML += addedContent;
    }

    function translatePoint(x,y,theta,r) {
        newy = y+r*Math.sin(theta);
        newx = x+r*Math.cos(theta);
        return [newx,newy];
    }
    function createHex(x,y,r,fill,stroke){
        //base angle and incremental angle
        var ba = 0;
        var ia = Math.PI/3;
        //find vertices
        var vertices = [];
        for (var i = 0; i < 6; i++) { 
            vertices[i] = translatePoint(x,y,ba+i*ia,r);
        }
        console.log(vertices.join());
        //translate all this info into svg format.
        var svgHex = `<polygon points="POINTSPLACEHOLDER" fill="FILLPLACEHOLDER" stroke="STROKEPLACEHOLDER"/>`;
        svgHex = svgHex.replace("FILLPLACEHOLDER",fill);
        svgHex = svgHex.replace("STROKEPLACEHOLDER",stroke);
        svgHex = svgHex.replace("POINTSPLACEHOLDER",vertices.join());
        return svgHex;
    }
    
    addToCanvas(createHex(0,0,hexInnerRadius,"red","green"));

</script>

<!--Here's an implementation of a similar concept using an actual canvas element: https://www.rareese.com/blog/hexagonjs-->



